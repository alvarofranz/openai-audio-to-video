I am working on a Python + Flask webapp which serves as a local tool to convert audio files into movies, by processing the narrated audio into a set of sequences and adding one image per sequence (via open ai or from a local selection) and then compose a final video with MoviePy.

Features:
- Process audio file into story elements
- Shows image creation cards
- Offers a local image references library which i can expand and then activate/deactivate single images to be or not included in the image generation endpoint
- Manages the state for image generation buttons so the app doe snot mix up two tasks at the same time

Cards:
reference_generation: [Just one card, a tool for reference images creation]
scenes: [Multiple cards for all Scenes, where each scene will be added to the final video]

Once all images are generated and edited, it ends the project with a final mp4 video composition including the original audio and all final scenes (scene_0.png, scene_1.png....)

I will provide you with all the files, for context, and then I will ask for some modifications. You need to reply with the full modified files (just the ones that need to be edited, you can ignore any file that does not need any modification). Please do not break any existing logic, and pay attention to details, so you give me a perfect final working version with all requested modifications.

File /.env
OPENAI_API_KEY=sk-proj-a

File /defaults.py
WORDS_PER_SCENE = 75
TEXT_MODEL       = "o4-mini"
IMAGES_AI_REQUESTED_SIZE = "1792x1024"
VIDEO_SIZE       = "1920x1080"
CROSSFADE_DUR    = 4.0
FADE_IN          = 1.5
FADE_OUT         = 2.0
IMAGE_PROMPT_STYLE       = "A cinematic illustration..."
CHARACTERS_PROMPT_STYLE  = "There are multiple characters in my story..."
IMAGE_PREPROCESSING_PROMPT = "You are a prompt preprocessor specialized in generating prompts for images..."

